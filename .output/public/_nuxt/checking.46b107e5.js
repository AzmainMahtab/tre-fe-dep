import{n as a}from"./nuxt-storage.min.66bc230f.js";import{a as s}from"./axios.956017f4.js";import{_ as l,L as d,t as n,v as r,M as i}from"./entry.fd3bedb8.js";const u={data(){return{loading:!0,token:"",path:"",savedFromFullPath:null}},mounted(){setTimeout(()=>{this.loading=!1},2e4)},created(){this.check()},methods:{async check(){if(console.log("---------checking---------"),this.token=a.localStorage.getData("token"),this.token==null)this.$router.push("login");else{const e=d();await s.get("/auth/current_user/",{headers:{accept:"application/json",Authorization:this.token}}).then(t=>{s.get(`/crm-employees/?user_id=${t.data.user_id}`).then(o=>{e.addValueToToken(this.token),e.addValueToRole(t.data.role),e.addValueToId(t.data.user_id),e.addValueToUsername(t.data.username),e.addValueToIdE(o.data[0].id),e.var==""?this.$router.push("/"):this.$router.push(e.var)}).catch(o=>{console.log(o)})}).catch(t=>{console.log(t),e.removeToken(),a.localStorage.clear(),this.$router.push("/login")})}},goBack(){this.$router.go(-1)}}},h={key:0,class:"loader"};function _(e,t,o,p,c,g){return n(),r("div",null,[c.loading?(n(),r("div",h)):i("",!0)])}const v=l(u,[["render",_],["__scopeId","data-v-3ae10484"]]);export{v as default};
