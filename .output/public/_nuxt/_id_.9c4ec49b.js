import{c as _}from"./createLucideIcon.b23d9764.js";import{_ as C,N as F,v as n,x as e,y as a,z as p,B as h,O as m,P as f,Q as y,R as w,S as x,M as r,t as i,T as k}from"./entry.b2f02e1d.js";import{a as c}from"./axios.932f1ea5.js";/**
 * @license lucide-vue-next v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=_("MailIcon",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-vue-next v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=_("MapPinnedIcon",[["path",{d:"M18 8c0 4.5-6 9-6 9s-6-4.5-6-9a6 6 0 0 1 12 0",key:"yrbn30"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M8.835 14H5a1 1 0 0 0-.9.7l-2 6c-.1.1-.1.2-.1.3 0 .6.4 1 1 1h18c.6 0 1-.4 1-1 0-.1 0-.2-.1-.3l-2-6a1 1 0 0 0-.9-.7h-3.835",key:"112zkj"}]]);/**
 * @license lucide-vue-next v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=_("PhoneIcon",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),T={components:{},data(){return{id:F().params.id,dataCustomer:[],dataEmpoloyee:[],dataComment:[],dataEmpoloyeeModal:[],employeeSelected:"",note:"",modalTransfer:!1,modalFollow:!1,dateFollow:"",statusFollow:""}},created(){this.getData(),this.getDataFollow(),this.getDataModal()},computed:{},methods:{async FollowUp(){if(this.dataCustomer.followup!=this.dateFollow)if(this.dateFollow==""){if(this.dataCustomer.followup!=null)var l={name:"Admin",description:"Removed the followup date of "+this.dataCustomer.followup,customer_id:this.id,employee_id:1};this.dataCustomer.followup=null}else{var l={name:"Admin",description:"changed the followup date from "+this.dataCustomer.followup+" to "+this.dateFollow+".",customer_id:this.id,employee_id:1};this.dataCustomer.followup==null&&(l.description="added followup date on "+this.dateFollow),this.dataCustomer.followup=this.dateFollow}if(this.dataCustomer.status!=this.statusFollow){var t={name:"Admin",description:"Changed Status "+this.dataCustomer.status+" to "+this.statusFollow,customer_id:this.id,employee_id:1};this.dataCustomer.status=this.statusFollow}t!=null&&await c.post("/crm-customer-comment/",t).then(d=>{console.log(d),this.getDataFollow()}).catch(d=>{console.log(d)}),l!=null&&await c.post("/crm-customer-comment/",l).then(d=>{console.log(d),this.getDataFollow()}).catch(d=>{console.log(d)}),await c.put(`/crm-customers/${this.dataCustomer.id}/`,this.dataCustomer).then(d=>{this.modalFollow=!1,this.getData()}).catch(d=>{console.log(d)})},async TransferEmployee(){if(this.employeeSelected==""){console.log(!1);return}let l={name:"Admin",description:"changed the assignee from "+this.dataEmpoloyee.first_name+" "+this.dataEmpoloyee.last_name+" to "+this.employeeSelected+".",customer_id:this.id,employee_id:1};await c.post("/crm-customer-comment/",l).then(t=>{console.log(t)}).catch(t=>{console.log(t)}),this.dataCustomer.assigned_employee_id=this.employeeSelected,await c.put(`/crm-customers/${this.dataCustomer.id}/`,this.dataCustomer).then(t=>{this.employeeSelected="",this.modalTransfer=!1,this.getData(),this.getDataFollow()}).catch(t=>{console.log(t)})},async getData(){await c.get(`/crm-customers/${this.id}/`).then(l=>{this.dataCustomer=l.data,this.dateFollow=this.dataCustomer.followup,this.statusFollow=this.dataCustomer.status,this.dataCustomer.assigned_employee_id!=null&&c.get(`/crm-employees/${this.dataCustomer.assigned_employee_id}/`).then(t=>{this.dataEmpoloyee=t.data}).catch(t=>{console.log(t)})}).catch(l=>{console.log(l)})},async getDataModal(){await c.get("/crm-employees/").then(l=>{this.dataEmpoloyeeModal=l.data}).catch(l=>{console.log(l)})},async getDataFollow(){await c.get(`/crm-customer-comment/?customer_id=${this.id}`).then(l=>{this.dataComment=l.data}).catch(l=>{console.log(l)})},async SubmitCommnet(){let l={name:"Admin",description:"added a note",note:this.note,customer_id:this.id,employee_id:1};await c.post("/crm-customer-comment/",l).then(t=>{console.log(t),this.note="",this.getDataFollow()}).catch(t=>{console.log(t)})}}},E={class:"flex justify-between items-center"},P=e("p",{class:"headerNav"},"Customer Details",-1),A={class:"flex items-center"},L=e("div",{class:"borderNav"},null,-1),N={class:"grid grid-cols-3 text-slate-700 fill-slate-700 font-semibold"},V={class:"col-span-2 pt-3 ml-10 grid grid-cols-5 border-r-2 f-full"},j={class:"col-span-3"},z={class:"text-4xl py-1 from-black"},U={class:"my-2 flex items-center gap-1"},R={class:""},B={class:"my-2 flex items-center gap-1"},I={class:""},H={class:"my-2 flex items-center gap-1"},q={class:""},O={class:"col-span-2"},Q={class:"mt-10"},G={class:"bg-slate-200 rounded px-2"},J={class:"mt-2"},K={key:0},W={key:1},X={class:"mt-2"},Y={key:0},Z={key:1},$={class:"col-span-1"},ee={class:"p-5"},te=e("p",{class:"text-2xl"},"Comments",-1),oe={class:"font-bold"},se={class:"font-medium"},le={key:0,class:"p-1 bg-slate-100 rounded-md"},ae={class:"text-xs ml-2"},ne={key:0,class:"overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none justify-center items-center flex"},ie={class:"relative w-auto my-6 mx-auto max-w-[600px] h-[500px]"},de={class:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none text-slate-700"},ce=e("div",{class:"flex justify-center px-5 py-2 border-b border-solid border-slate-200 rounded-t"},[e("h3",{class:"text-xl font-semibold"},"Transfer Lead")],-1),re={class:"w-[600px]"},me={class:"mx-20 my-5"},ue=e("option",{class:"text-slate-700",value:"",hidden:""}," Select Employee ",-1),pe=["value"],he={class:"flex items-center justify-end px-6 py-3 border-t border-solid border-slate-200 rounded-b"},_e={key:1,class:"opacity-25 fixed inset-0 z-40 bg-black"},fe={key:2,class:"overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none justify-center items-center flex"},ye={class:"relative w-auto my-6 mx-auto max-w-[600px] h-[500px]"},we={class:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none text-slate-700"},xe=e("div",{class:"flex justify-center px-5 py-2 border-b border-solid border-slate-200 rounded-t"},[e("h3",{class:"text-xl font-semibold"},"Followup Lead")],-1),ve={class:"w-[600px]"},ge={class:"mx-20 my-5 flex gap-2"},be=k('<option class="text-slate-700" value="" hidden> Select Status </option><option value="Raw">Raw</option><option value="Prospect">Prospect</option><option value="High Prospect">High Prospect</option><option value="Priority">Priority</option><option value="Closed">Closed</option>',6),Ce=[be],Fe={class:"flex items-center justify-end px-6 py-3 border-t border-solid border-slate-200 rounded-b"},ke={key:3,class:"opacity-25 fixed inset-0 z-40 bg-black"};function Se(l,t,d,De,o,u){const v=S,g=M,b=D;return i(),n("div",null,[e("div",E,[P,e("div",A,[e("button",{onClick:t[0]||(t[0]=s=>o.modalTransfer=!0),class:"btn"},"Transfer"),e("button",{onClick:t[1]||(t[1]=s=>o.modalFollow=!0),class:"btn"},"Follow Up"),e("p",{class:"mx-1 underline text-slate-700 cursor-pointer hover:scale-105 font-semibold",onClick:t[2]||(t[2]=s=>this.$router.push("/customer"))}," Customer Details ")])]),L,e("div",N,[e("div",V,[e("div",j,[e("p",z,a(o.dataCustomer.first_name)+" "+a(o.dataCustomer.last_name),1),e("div",U,[e("p",R,[p(v,{class:"text-slate-600"})]),e("p",null,a(o.dataCustomer.email),1)]),e("div",B,[e("p",I,[p(g,{class:"text-slate-600"})]),e("p",null,a(o.dataCustomer.phone),1)]),e("div",H,[e("p",q,[p(b,{class:"text-slate-600"})]),e("p",null,a(o.dataCustomer.address),1)])]),e("div",O,[e("div",Q,[e("p",null,[h(" Status: "),e("span",G,a(o.dataCustomer.status),1)])]),e("div",J,[e("p",null,[h(" Assigned to: "),o.dataEmpoloyee==""?(i(),n("span",K," Not Assigned")):(i(),n("span",W,a(o.dataEmpoloyee.first_name)+" "+a(o.dataEmpoloyee.last_name),1))])]),e("div",X,[e("p",null,[h(" Followup Date: "),o.dataCustomer.followup==null?(i(),n("span",Y,"-")):(i(),n("span",Z,a(o.dataCustomer.followup),1))])])])]),e("div",$,[e("div",ee,[te,m(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=s=>o.note=s),class:"inp mt-3",placeholder:"add note"},null,512),[[f,o.note]]),e("button",{onClick:t[4]||(t[4]=s=>u.SubmitCommnet()),class:"btnS text-sm"},"Submit"),(i(!0),n(y,null,w(o.dataComment,s=>(i(),n("div",{key:s,class:"my-3 mx-1 text-sm"},[e("p",null,[e("span",oe,a(s.name)+": ",1),e("span",se,a(s.description),1)]),s.note!=null?(i(),n("p",le,a(s.note),1)):r("",!0),e("p",ae,a(s.created_at),1)]))),128))])])]),o.modalTransfer?(i(),n("div",ne,[e("div",ie,[e("div",de,[ce,e("div",re,[e("div",me,[m(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>o.employeeSelected=s),class:"inpS",required:""},[ue,(i(!0),n(y,null,w(o.dataEmpoloyeeModal,s=>(i(),n("option",{key:s,value:s.id},a(s.first_name)+" "+a(s.last_name),9,pe))),128))],512),[[x,o.employeeSelected]])])]),e("div",he,[e("button",{onClick:t[6]||(t[6]=s=>u.TransferEmployee()),class:"btn"},"Transfer"),e("button",{onClick:t[7]||(t[7]=s=>o.modalTransfer=!1),class:"btnD"},"Cancel")])])])])):r("",!0),o.modalTransfer?(i(),n("div",_e)):r("",!0),o.modalFollow?(i(),n("div",fe,[e("div",ye,[e("div",we,[xe,e("div",ve,[e("div",ge,[m(e("input",{type:"date",class:"inp","onUpdate:modelValue":t[8]||(t[8]=s=>o.dateFollow=s)},null,512),[[f,o.dateFollow]]),m(e("select",{class:"inpS","onUpdate:modelValue":t[9]||(t[9]=s=>o.statusFollow=s)},Ce,512),[[x,o.statusFollow]])])]),e("div",Fe,[e("button",{onClick:t[10]||(t[10]=s=>u.FollowUp()),class:"btn"},"Submit"),e("button",{onClick:t[11]||(t[11]=s=>o.modalTransfer=!1),class:"btnD"},"Cancel")])])])])):r("",!0),o.modalFollow?(i(),n("div",ke)):r("",!0)])}const Pe=C(T,[["render",Se]]);export{Pe as default};
